(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(n){if(n.ep)return;n.ep=!0;const d=r(n);fetch(n.href,d)}})();let j={},re=!1;async function ne(){try{const e=await fetch("/valid-words-by-length.json");if(!e.ok)throw new Error("Failed to load word list");const t=await e.json();for(const r in t)t[r]=t[r].map(o=>o.toUpperCase());j=t,re=!0}catch(e){console.error("Error loading words:",e)}}function G(e){return(j[e.length]||[]).includes(e.toUpperCase())}let p={};const oe=ce(),P=ae(oe);async function de(){try{const e=await fetch("/generate-words-by-length.json");if(!e.ok)throw new Error("Failed to load generation words");const t=await e.json();for(const r in t)t[r]=t[r].map(o=>o.toUpperCase());p=t}catch(e){console.error("Error loading generation words:",e)}}function E(e,t){const r=e[t];if(!r||r.length===0)throw new Error(`No words found of length ${t}`);return r[Math.floor(P()*r.length)].toUpperCase()}function h(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(P()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function se(){if(!p||Object.keys(p).length===0)throw new Error("Word list not loaded");const e=[E(p,5),E(p,5)],t=[E(p,4),E(p,6)],r=[E(p,7),E(p,5)],o=[...r[0],...r[1]];h(o);const n=o.slice(0,6),d=o.slice(6);let s=[...e[0],...e[1],...n],a=[...t[0],...t[1],...d];if(s.length!==16||a.length!==16)throw new Error(`Unexpected letter count. Blue: ${s.length}, Green: ${a.length}`);h(s),h(a);const c=[];for(let l=0;l<16;l++)c.push([a[l],s[l]]);return{board:h(c),wordsUsed:{green:t,blue:e,split:r}}}function ae(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function ce(e=new Date){const t=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();return parseInt(`${t}${String(r).padStart(2,"0")}${String(o).padStart(2,"0")}`,10)}const U=2,$=16,le=new Date,ie=new Date("2025-07-14"),ue=Math.floor((le-ie)/(1e3*60*60*24)),x=(ue+1).toString(),me=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u={WELCOME:"WELCOME",LANDSCAPE_WARNING:"LANDSCAPE_WARNING",GAME_OVER:"GAME_OVER",CONFIRM_RESET:"GAME_RESET",INSTRUCTIONS:"INSTRUCTIONS",STATS:"STATS"};function fe(e,t,r){if(e.length<2)return!1;if(e.length>=6||t>=32)return!0;const o=pe(r);for(let n=U;n<=$;n++){const d=ye(o,n);for(let s of d)if(G(s))return!1}return!0}function pe(e){const t=Math.max(...e.map(o=>o.cellIndex)),r=[];for(let o=0;o<=t;o++){const d=e.filter(s=>s.cellIndex===o&&s.cardStatus!=="submitted").sort((s,a)=>s.stackIndex-a.stackIndex).map(s=>s.letter);d.length>0&&r.push(d)}return r}function ye(e,t){const r=[];function o(n,d){if(n.length===t){r.push(n.join(""));return}for(let s=0;s<d.length;s++){if(d[s].length===0)continue;const a=d.map(l=>[...l]),c=a[s].shift();o([...n,c],a)}}return o([],e),r}function ge(e,t){return e.map(r=>t.find(n=>n.id===r).letter).join("")}function Ee(e){return e.length===0?void 0:e.map(r=>m().cards.find(o=>o.id===r))}function T(e){return e.reduce((t,r)=>t+r.length,0)}const y=document.getElementById("message-banner"),f=document.getElementById("word-guess-wrapper"),Ce=document.getElementById("scoreboard"),M=document.getElementById("game-board"),he=document.getElementById("score-counter-text"),be=document.getElementById("words-submitted-counter-text"),A=document.getElementById("undo-button"),C=document.getElementById("submit-button"),I=document.getElementById("restart-button"),Ae=document.getElementById("welcome-modal-wrapper"),Ie=document.getElementById("date"),Se=document.getElementById("puzzle-number"),We=document.getElementById("alert-modal"),D=document.getElementById("alert-modal-title"),Le=document.getElementById("alert-modal-sub-title"),_=document.getElementById("alert-modal-text"),V=document.getElementById("alert-modal-close-button"),B=document.getElementById("alert-modal-left-button"),F=document.getElementById("alert-modal-right-button"),ve=document.getElementById("game-over-modal"),W=document.getElementById("game-over-title"),L=document.getElementById("game-over-sub-title"),Oe=document.getElementById("game-over-stats"),H=document.getElementById("game-over-summary-section"),q=document.getElementById("close-modal-button"),Be=document.getElementById("share-button"),z=document.getElementById("play-again-button"),k=document.getElementById("play-button"),v=new Set;function we(e){if(e.actionHistory.at(-1)?.type==="RAISE_CARD")return;const r=document.querySelectorAll("#main-card .card"),o=document.querySelectorAll("#main-card .cell"),n=document.querySelectorAll("#scoreboard .scoreboard-word");for(let d of r)d.remove();for(let d of o)d.remove();for(let d of n)d.remove()}function xe(e){if(e.actionHistory.at(-1)?.type==="RAISE_CARD")return;const r=e.cards.map(d=>d.cellIndex),o=r.length>0?Math.max(...r):-1;if(o===-1){console.log("Problem Adding Cards to Grid");return}for(let d=0;d<=o;d++){const s=document.createElement("div");s.classList.add("cell"),M.appendChild(s)}const n=document.querySelectorAll("#game-board .cell");for(let d=0;d<n.length;d++){const a=e.cards.filter(c=>c.cellIndex===d).sort((c,l)=>c.stackIndex-l.stackIndex).filter(c=>c.cardStatus==="AVAILABLE"||c.cardStatus==="RAISED");if(a.length!==0)for(let c of a){const l=R(c.letter,c.stackIndex,c.id);a.length===1?l.classList.add("solo"):a.length>1&&l.classList.add(c.stackIndex===0?"top":"bottom"),n[d].appendChild(l)}}}function Me(e){if(e.actionHistory.at(-1)?.type==="RAISE_CARD"||!e.currentWord)return;const o=e.currentWord.map(n=>e.cards.find(d=>d.id===n)).filter(n=>n).map(n=>({letter:n.letter,stackIndex:n.stackIndex,id:n.id}));for(let n of o){const d=R(n.letter,n.stackIndex,n.id);f.appendChild(d)}}function ke(e){if(e.actionHistory.at(-1)?.type==="RAISE_CARD")return;const r=[];for(let n of e.submittedWordsCardIds){const d=n.map(s=>e.cards.find(a=>a.id===s)).filter(s=>s);r.push(d)}const o=r.map(n=>n.map(d=>({letter:d.letter,stackIndex:d.stackIndex,id:d.id})));for(let n of o){const d=document.createElement("div");d.classList.add("scoreboard-word");for(let s of n){const a=R(s.letter,s.stackIndex,s.id);d.appendChild(a)}Ce.appendChild(d)}}function Re(e){const t=document.querySelectorAll(".raised");for(let n of t)n.classList.remove("raised");const r=e.cards.find(n=>n.cardStatus==="RAISED");if(!r)return;const o=document.querySelector(`[data-card-id="${r.id}"]`);o&&o.classList.add("raised")}function R(e,t,r){const o=document.createElement("div");return o.classList.add("card"),o.dataset.cardId=r,o.innerHTML=`<span>${e}</span>`,t===0?o.classList.add("green"):o.classList.add("blue"),o}function Te(e){const{score:t,submittedWordsCardIds:r}=e,o=r.length;he.textContent=`Score: ${t}`,be.textContent=`Words: ${o}/6`}function De(){const e=document.querySelectorAll("#game-board .card.top, #game-board .card.solo"),t=document.querySelectorAll("#word-guess-wrapper .card"),r=document.querySelectorAll("#game-board .card.bottom"),o=document.querySelectorAll("#scoreboard .card"),n=document.querySelectorAll("#game-board .card.game-over");for(let d of[...e,...t])d.setAttribute("tabindex","0");for(let d of[...r,...o,...n])d.removeAttribute("tabindex")}function _e(){const{submittedWordsCardIds:e,currentWord:t}=m();t.length===0&&e.length===0?(I.disabled=!0,A.disabled=!0):(A.disabled=!1,I.disabled=!1),t.length<2||t.length>16?C.disabled=!0:C.disabled=!1}function K(){const e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)}function Y(e,t="error",r=2500){y.textContent=e,y.className="",y.classList.add(t==="error"?"error":"success"),y.classList.remove("hidden"),t==="success"?y.classList.add("success"):y.classList.add("error"),setTimeout(()=>{i({type:"HIDE_BANNER"})},r)}function He(e){const t=e.actionHistory.at(-1);if(!t||t.type!=="SELECT_CARD")return;f.scrollWidth>f.clientWidth?(f.classList.add("scroll-mode"),f.scrollLeft=f.scrollWidth):(f.classList.remove("scroll-mode"),f.scrollLeft=0)}function O(e,t){e.addEventListener("click",r=>{r.currentTarget.blur(),t(r)})}async function Ne(e){if(v.has(e))return;v.add(e);const t=document.querySelector(`[data-card-id="${e}"]`);t.classList.add("incorrect-shake"),await new Promise(r=>setTimeout(r,500)),t.classList.remove("incorrect-shake"),i({type:"UNDO"}),v.delete(e)}function je(){const e=document.querySelectorAll("#game-board .cell .card.green"),t=document.querySelectorAll("#game-board .cell .card.blue");for(let r of e)r.classList.add("game-over");for(let r of t)r.classList.add("game-over")}function Ge(){const e=document.querySelectorAll("#game-board .cell .card.game-over");if(e.length)for(let t of e)t.classList.remove("game-over")}const N={[u.WELCOME]:"welcome-modal-wrapper",[u.LANDSCAPE_WARNING]:"landscape-warning",[u.GAME_OVER]:"game-over-modal",[u.CONFIRM_RESET]:"alert-modal",[u.INSTRUCTIONS]:"instructions-modal",[u.STATS]:"stats-modal"};function Pe(e){if(Object.values(N).forEach(t=>{const r=document.getElementById(t);r&&r.classList.add("hidden")}),e.modal.isOpen&&e.modal.type&&N[e.modal.type])switch(e.modal.type){case u.WELCOME:{Ue();break}case u.LANDSCAPE_WARNING:{b();break}case u.CONFIRM_RESET:{$e();break}case u.GAME_OVER:{Ve();break}}}function Ue(){Ie.innerText=me,Se.innerText=`No. ${x}`,Ae.classList.remove("hidden")}function $e(){D&&D.remove(),_&&_.remove(),B&&B.remove(),Le.textContent="Are you sure you want to restart?",We.classList.remove("hidden")}function Ve(){const e=m(),t=e.score,r=32-t,o=e.submittedWords.length;r>=1?(W.textContent="Game Over",L.textContent="Play again to try for a perfect score!"):t>=32&&o===6?(W.textContent=`Perfect in ${o}!`,L.textContent="Can you clear the board in 5?"):t>=32&&o<=5&&(W.textContent=`Perfect in ${o}!`,L.textContent="Well done! See you tomorrow."),Oe.textContent=`Score: ${t} / 32 | Words: ${o} / 6`,H.innerHTML="";for(let n of e.submittedWordsCardIds){const d=Fe(n);H.appendChild(d)}ve.classList.remove("hidden")}function Fe(e){const t=Ee(e),r=document.createElement("div");r.classList.add("summary-section-word");for(let o=0;o<t.length;o++){const n=t[o].letter,d=t[o].stackIndex,s=document.createElement("div");s.classList.add("game-over-card"),s.innerHTML=`<span>${n}</span>`,d===0&&s.classList.add("green"),d===1&&s.classList.add("blue"),r.appendChild(s)}return r}function J(){const e=m().submittedWordsCardIds,t=[];for(let r of e){let o="";for(let n of r)n.stackIndex===0&&(o+="🟩"),n.stackIndex===1&&(o+="🟦");t.push(o)}return t}function qe(){const e=m(),t=e.score,r=e.submittedWordsCardIds.length,n=J().join(`
`);return[`Six Words #${x}`,`I scored ${t} points in ${r} words!`,n].join(`\r
`).trim()}function ze(){const e=m(),t=e.score,r=e.submittedWordsCardIds.length,n=J().join(`
`);return[`I scored ${t} points in ${r} words!`,n].join(`\r
`).trim()}function Ke(){return/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)}function Ye(){const e=qe(),t=ze();Ke()&&navigator.share?navigator.share({title:`Six Words #${x}`,text:t}).then(()=>{console.log("Shared successfully!")}).catch(r=>{console.error("Sharing was cancelled or failed:",r)}):navigator.clipboard.writeText(e).then(()=>{displayMessage("Copied to clipboard","success")}).catch(r=>{console.error("Failed to copy results to clipboard:",r)})}function b(){document.getElementById("landscape-warning").classList.toggle("hidden",!Je())}function Je(){const e=window.innerHeight,r=window.innerWidth/e;return e<=650&&r>1.8||e<400&&r>1}function Qe(){const e=m();we(e),xe(e),Me(e),ke(e),Te(e),Re(e),Ze(e),Pe(e),He(e),Xe(e),et(e),_e(),De()}function Xe(e){e.gameIsOver&&je(),e.gameIsOver||Ge()}function Ze(e){if(!e.messageBanner.visible||e.gameIsOver||e.modal.isOpen){y.classList.add("hidden");return}Y(e.messageBanner.text,e.messageBanner.type)}function et(e){const t=e.cards.filter(o=>o.cardStatus==="SHAKE").at(-1);if(!t)return;const r=t.id;Ne(r)}const Q={cards:[],currentWord:[],submittedWords:[],submittedWordsCardIds:[],actionHistory:[],score:0,gameIsOver:!1,modal:{isOpen:!0,type:u.WELCOME},messageBanner:{text:null,type:null,visible:!1}};let w={...Q};function i(e){w=tt(w,e),Qe()}function tt(e,t){switch(t.type){case"INIT":{const r=nt(t.payload.board);return{...Q,cards:r}}case"RAISE_CARD":{const r=e.cards.find(d=>d.id===t.payload.id);if(!r||r.cardStatus!=="AVAILABLE"||e.currentWord.includes(t.payload.id))return e;const o=[...e.actionHistory,t],n=e.cards.map(d=>d.id===t.payload.id?{...d,cardStatus:"RAISED"}:d.cardStatus==="RAISED"?{...d,cardStatus:"AVAILABLE"}:d);return{...e,cards:n,actionHistory:o}}case"SELECT_CARD":{if(e.gameIsOver)return e;const r=e.cards.find(s=>s.id===t.payload.id);if(!r||!(r.cardStatus==="AVAILABLE"||r.cardStatus==="RAISED"))return e;if(e.currentWord.length>=16){const s=[...e.currentWord,t.payload.id],a=[...e.actionHistory,t],c=e.cards.map(l=>l.id===t.payload.id?{...l,cardStatus:"SHAKE"}:l);return{...e,currentWord:s,cards:c,actionHistory:a,messageBanner:{text:null,type:null,visible:!1}}}if(e.currentWord.includes(t.payload.id))return e;const o=[...e.currentWord,t.payload.id],n=[...e.actionHistory,t],d=e.cards.map(s=>s.id===t.payload.id?{...s,cardStatus:"SELECTED"}:s);return{...e,currentWord:o,cards:d,actionHistory:n,messageBanner:{text:null,type:null,visible:!1}}}case"SUBMIT_WORD":{if(e.gameIsOver||t.payload.currentWord.length<U||t.payload.currentWord.length>$)return e;const r=ge(t.payload.currentWord,e.cards);if(!G(r)){const l=[],Z=t.payload.currentWord,ee=[...e.actionHistory,t],te=e.cards.map(S=>Z.includes(S.id)?{...S,cardStatus:"AVAILABLE"}:S);return{...e,currentWord:l,cards:te,actionHistory:ee,messageBanner:{text:"Not in word list",type:"error",visible:!0}}}const o=[...e.submittedWords,r],n=[...e.submittedWordsCardIds,t.payload.currentWord],d=[...e.actionHistory,t],s=T(n),a=e.cards.map(l=>t.payload.currentWord.includes(l.id)?{...l,cardStatus:"SUBMITTED"}:l),c=fe(o,s,a);return{...e,submittedWords:o,submittedWordsCardIds:n,currentWord:[],cards:a,actionHistory:d,score:s,gameIsOver:c,messageBanner:{text:`Nice! +${e.currentWord.length} points`,type:"success",visible:!0},modal:c?{isOpen:!0,type:u.GAME_OVER}:e.modal}}case"UNDO":{if(e.submittedWordsCardIds.length===0&&e.currentWord.length===0)return e;if(e.currentWord.length===0){const r=e.submittedWordsCardIds.at(-1),o=e.submittedWords.slice(0,-1),n=e.submittedWordsCardIds.slice(0,-1),d=[...e.actionHistory,t],s=T(n),a=e.cards.map(c=>r.includes(c.id)?{...c,cardStatus:"SELECTED"}:c);return{...e,submittedWords:o,submittedWordsCardIds:n,currentWord:r,cards:a,actionHistory:d,score:s,gameIsOver:!1,messageBanner:{text:null,type:null,visible:!1}}}if(e.currentWord.length>0){const r=e.currentWord.at(-1),o=e.currentWord.slice(0,-1),n=[...e.actionHistory,t],d=e.cards.map(s=>s.id===r?{...s,cardStatus:"AVAILABLE"}:s);return{...e,currentWord:o,cards:d,actionHistory:n,messageBanner:{text:null,type:null,visible:!1}}}return e}case"UNDO_THROUGH_TAPPED_LETTER":{if(e.currentWord.length===0)return e;const r=e.currentWord.indexOf(t.payload.id);if(r===-1)return e;const o=e.currentWord.slice(0,r),n=e.currentWord.slice(r),d=[...e.actionHistory,t],s=e.cards.map(a=>n.includes(a.id)?{...a,cardStatus:"AVAILABLE"}:a);return{...e,currentWord:o,cards:s,actionHistory:d}}case"RESTART":{if(e.submittedWordsCardIds.length===0&&e.currentWord.length===0)return e;const r=e.cards.map(o=>({...o,cardStatus:"AVAILABLE"}));return{...e,cards:r,currentWord:[],submittedWords:[],submittedWordsCardIds:[],actionHistory:[...e.actionHistory,t],score:0,gameIsOver:!1,modal:{isOpen:!1,type:null},messageBanner:{text:null,type:null,visible:!1}}}case"MODAL_OPEN":return console.log(t.payload.type),{...e,modal:{isOpen:!0,type:t.payload.type},messageBanner:{text:null,type:null,visible:!1}};case"MODAL_CLOSE":return{...e,modal:{isOpen:!1,type:null},messageBanner:{text:null,type:null,visible:!1}};case"SHOW_BANNER":return{...e,messageBanner:{text:t.payload.text,type:t.payload.type,visible:!0}};case"HIDE_BANNER":return{...e,messageBanner:{...e.messageBanner,visible:!1}};default:return e}}function rt(e){if(!e)throw new Error("Board must be provided to initialize the game.");i({type:"INIT",payload:{board:e}})}function m(){return w}function nt(e){return e.flatMap((t,r)=>t.map((o,n)=>({id:`cell-${r}_stack-${n}`,letter:o,cellIndex:r,stackIndex:n,cardStatus:"AVAILABLE"})))}const g={currentKey:null,currentIndex:0};function X(){g.currentKey=null,g.currentIndex=0}function ot(e){const t=e.cards.filter(n=>n.cardStatus==="AVAILABLE"||n.cardStatus==="RAISED");if(t.length===0)return;const r=Math.max(...t.map(n=>n.cellIndex)),o=[];for(let n=0;n<=r;n++){const d=t.filter(s=>s.cellIndex===n);d.length!==0&&(d.length===1&&o.push(...d),d.length>1&&o.push(...d.filter(s=>s.stackIndex===0)))}return o}function dt(e,t){const r=e?.filter(n=>n.letter.toUpperCase()===t.toUpperCase());if(!r||r.length===0)return;g.currentKey!==t&&(g.currentKey=t,g.currentIndex=0);const o=g.currentIndex%r.length;i({type:"RAISE_CARD",payload:{id:r[o].id}}),g.currentIndex++}function st(){const e=m();e.modal.isOpen&&e.modal.type==="WELCOME"&&k?.click(),e.modal.isOpen&&e.modal.type==="GAME_RESET"&&V?.click(),e.modal.isOpen&&e.modal.type==="GAME_OVER"&&q?.click(),e.modal.isOpen||I?.click()}function at(){const e=m();if(e.modal.isOpen){switch(e.modal.type){case"WELCOME":k?.click();break;case"GAME_RESET":F?.click();break;case"GAME_OVER":z?.click();break}return}const t=document.activeElement;if(t){if(t.matches("#button-wrapper button")){t?.click(),t.id==="undo-button"&&setTimeout(()=>{t.focus()},0);return}if(t.matches('.card[tabindex="0"]')){t?.click();return}}const r=document.querySelector(".raised");if(r){X(),r?.click();return}C.disabled||C?.click()}function ct(){X(),A?.click()}function lt(e){if(!e.key)return;const t=m();if(e.key==="Escape"&&st(),(e.key==="Enter"||e.key==="Return")&&at(),t.modal.isOpen)return;(e.key==="Backspace"||e.key==="Delete")&&ct();const r=e.key.toUpperCase(),o=ot(t);dt(o,r)}function it(){const{currentWord:e}=m();i({type:"SUBMIT_WORD",payload:{currentWord:e}})}function ut(){i({type:"UNDO"})}function mt(){i({type:"MODAL_OPEN",payload:{type:u.CONFIRM_RESET}})}function ft(e){const t=e.target.closest(".card.top, .card.solo");!t||!M.contains(t)||i({type:"SELECT_CARD",payload:{id:t.dataset.cardId}})}function pt(e){const t=e.target.closest(".card");!t||!f.contains(t)||i({type:"UNDO_THROUGH_TAPPED_LETTER",payload:{id:t.dataset.cardId}})}document.addEventListener("DOMContentLoaded",async()=>{try{await Promise.all([ne(),de()]);const{board:e}=se();rt(e),K(),yt()}catch(e){Y("Failed to load.","error",5e3),console.error(e)}});function yt(){k.addEventListener("click",()=>{i({type:"MODAL_CLOSE"})}),V.addEventListener("click",()=>{i({type:"MODAL_CLOSE"})}),F.addEventListener("click",()=>{i({type:"MODAL_CLOSE"}),i({type:"RESTART"})}),B.addEventListener("click",()=>{i({type:"MODAL_CLOSE"})}),q.addEventListener("click",()=>{i({type:"MODAL_CLOSE"})}),z.addEventListener("click",()=>{i({type:"MODAL_CLOSE"}),i({type:"RESTART"})}),Be.addEventListener("click",Ye),window.addEventListener("load",b),window.addEventListener("resize",b),window.addEventListener("orientationchange",b),M.addEventListener("click",ft),f.addEventListener("click",pt),document.addEventListener("keydown",lt),O(A,ut),O(C,it),O(I,mt),document.addEventListener("dblclick",e=>e.preventDefault()),window.addEventListener("resize",K)}
